<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="./css/element-index.css">
    <script src="./js/vue.js"></script>
    <script src="./js/axios.min.js"></script>
    <script src="./js/element-index.js"></script>
</head>
<body>
<div id="app">
    <el-container style="height: 100%;">
        <el-header style="background-color: #F9B117;height: 80px;margin: 20px;padding: 0px;">
            <el-row style="height: 100%;">
                <el-col :span="4" style="background-color:white;height: 100%;">
                    <img src="img/logo.png" class="logo-image" alt="Logo">
                </el-col>
                <el-col :span="3" :offset="16" style="height: 100%;">
                    <div class="login-container">
                        <el-avatar class="user-avatar" :src="imageUrl || 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png' "></el-avatar>
                        <el-dropdown v-if="token" @command="handleCommand">
                            <el-button type="text" class="el-dropdown-link">
                                {{ username }}<i class="el-icon-arrow-down el-icon--right"></i>
                            </el-button>
                            <el-dropdown-menu slot="dropdown">
                                <el-dropdown-item @click.native="change('profile.html')">Modify Information</el-dropdown-item>
                                <el-dropdown-item @click.native="change('password.html')">Modify Password</el-dropdown-item>
                                <el-dropdown-item @click.native="change('avatar.html')">Upload Avatar</el-dropdown-item>
                                <el-dropdown-item command="logout">Logout</el-dropdown-item>
                            </el-dropdown-menu>
                        </el-dropdown>
                        <el-button v-else type="text" @click="handleLogin" class="underline-button">Login</el-button>
                    </div>
                </el-col>
            </el-row>
        </el-header>
        <el-container style="background-color: white;height: 600px;">
            <el-aside width="214px" style="background-color: #F9B117;height: 100%;">
                <div>
                    <el-menu default-active="1" class="el-menu-vertical-demo custom-menu">
                        <el-menu-item index="1" @click="change('dashboard.html')" class="custom-menu-item">
                            <i class="el-icon-s-promotion"></i>
                            <span slot="title">Dashboard</span>
                        </el-menu-item>
                        <el-menu-item index="2" @click="change('create-event.html')" class="custom-menu-item">
                            <i class="el-icon-menu"></i>
                            <span slot="title">Event Management</span>
                        </el-menu-item>
                        <el-menu-item index="3" @click="change('participants-speakers.html')" class="custom-menu-item">
                            <i class="el-icon-document"></i>
                            <span slot="title">Participants & Speakers</span>
                        </el-menu-item>
                        <el-menu-item index="4" @click="change('bookmanagement.html')" class="custom-menu-item">
                            <i class="el-icon-setting"></i>
                            <span slot="title">Booking Management</span>
                        </el-menu-item>
                    </el-menu>
                </div>
            </el-aside>
            <el-main style="background-color: beige;height: 100%;">
                <!-- Divide the page into multiple small pages, each page can display an independent HTML file -->
                <iframe :src="currentPage" frameborder="0" style="width: 100%;height: 100%;padding: 0px"></iframe>
            </el-main>
        </el-container>
    </el-container>
</div>

<!-- Footer section -->
<footer class="generic-padding">
    <div class="row">
        <div class="col-6 col-lg-4">
            <a href="/"><img src="https://cdn.tramshedtech.co.uk/static/img/home/LOGO%20Concept%201.svg" width="90%" height="auto" alt="Tramshed Tech Logo" style="max-width: 200px;"></a>
            <div class="copyright-text mt-3 mt-lg-5 mb-2">Copyright Â© 2023 Tramshed Tech</div>
            <div class="copyright-text mb-2">All rights reserved</div>
            <div class="row mt-0 mt-lg-5 gx-0 gx-lg-3 gy-3 gy-lg-0 d-flex d-lg-none" id="footer-social-media-links">
                <a href="https://www.linkedin.com/company/tramshed-tech" target="_blank" rel="noopener" class="footer-social-media-icon col-4 col-lg-2">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/Linkedin%20Logo.svg" alt="LinkedIn">
                </a>
                <a href="https://www.facebook.com/tramshedtech/" target="_blank" rel="noopener" class="footer-social-media-icon col-4 col-lg-2">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/Facebook%20Logo.svg" alt="Facebook">
                </a>
                <a href="https://twitter.com/TramshedTech" target="_blank" rel="noopener" class="footer-social-media-icon col-4 col-lg-2">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/X%20Logo.svg" alt="X">
                </a>
                <a href="https://www.instagram.com/tramshedtech/?hl=en" target="_blank" rel="noopener" class="footer-social-media-icon col-4 col-lg-2">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/Instagram%20Logo.svg" alt="Instagram">
                </a>
                <a href="https://www.tiktok.com/@tramshedtech" target="_blank" rel="noopener" class="footer-social-media-icon col-4 col-lg-2">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/TikTok%20Logo.svg" alt="TikTok">
                </a>
                <a href="https://chat.whatsapp.com/Feq2E16MNlOGWOtgmB7NCT" target="_blank" rel="noopener" class="footer-social-media-icon col-4 col-lg-2">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/whatsapp-logo.svg" alt="WhatsApp">
                </a>
            </div>
            <div class="mt-0 mt-lg-5 d-none d-lg-block" id="footer-social-media-links">
                <a href="https://www.linkedin.com/company/tramshed-tech" target="_blank" rel="noopener" class="footer-social-media-icon sp-me-1">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/Linkedin%20Logo.svg" alt="LinkedIn">
                </a>
                <a href="https://www.facebook.com/tramshedtech/" target="_blank" rel="noopener" class="footer-social-media-icon sp-me-1">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/Facebook%20Logo.svg" alt="Facebook">
                </a>
                <a href="https://twitter.com/TramshedTech" target="_blank" rel="noopener" class="footer-social-media-icon sp-me-1">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/X%20Logo.svg" alt="X">
                </a>
                <a href="https://www.instagram.com/tramshedtech/?hl=en" target="_blank" rel="noopener" class="footer-social-media-icon sp-me-1">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/Instagram%20Logo.svg" alt="Instagram">
                </a>
                <a href="https://www.tiktok.com/@tramshedtech" target="_blank" rel="noopener" class="footer-social-media-icon sp-me-1">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/TikTok%20Logo.svg" alt="TikTok">
                </a>
                <a href="https://chat.whatsapp.com/Feq2E16MNlOGWOtgmB7NCT" target="_blank" rel="noopener" class="footer-social-media-icon">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/home/whatsapp-logo.svg" alt="WhatsApp">
                </a>
            </div>
        </div>
        <div class="col-3 col-lg-2">
            <div class="footer-header">Company</div>
            <div class="footer-link">
                <a href="/locations/">Locations</a>
            </div>
            <div class="footer-link">
                <a href="/news/">News</a>
            </div>
            <div class="footer-link">
                <a href="/accessibility/">Accessibility</a>
            </div>
            <div class="footer-link">
                <a href="/events/">Events</a>
            </div>
            <div class="footer-link">
                <a href="https://members.tramshedtech.co.uk/login" target="_blank" rel="noopener">Members Login</a>
            </div>
        </div>
        <div class="col-3 col-lg-2">
            <div class="footer-header">Support</div>
            <div class="footer-link">
                <a href="/faq/">FAQ's</a>
            </div>
            <div class="footer-link">
                <a href="/careers/">Careers</a>
            </div>
            <div class="footer-link">
                <a href="/programmes/">Programmes</a>
            </div>
            <div class="footer-link">
                <a href="/policies/">Policies</a>
            </div>
            <div class="footer-link">
                <a href="https://rw749ut97a8.typeform.com/to/vh4IZOHe" target="_blank">Website Feedback</a>
            </div>
        </div>
        <div class="col-6 col-lg-4 mt-5 mt-lg-0">
            <div id="footer-social-media-links">
                <p class="footer-header">Download our App</p>
                <a href="https://apps.apple.com/gb/app/tramshed-tech/id1496178665" style="margin-right: 20px;">
                    <img class="no-border-radius mb-3 mb-lg-0" src="https://cdn.tramshedtech.co.uk/static/img/icons/Apple%20Store.svg" alt="Apple Store" width="120px" height="auto">
                </a>
                <a class="mt-3 mt-lg-0" href="https://play.google.com/store/apps/details?id=com.nexudusspaces.tramshedtech&amp;hl=en_GB&amp;gl=US">
                    <img class="no-border-radius" src="https://cdn.tramshedtech.co.uk/static/img/icons/Android%20Store.svg" alt="Google Play" width="135px" height="auto">
                </a>
                <div class="footer-link mt-5 d-none d-lg-block">
                    Subscribe to our <a href="https://share-eu1.hsforms.com/1cg9VbQ-lSEu9h1dveuw1Ewf9dkj" target="_blank" style="text-decoration: underline;">newsletter</a>
                </div>
            </div>
        </div>
        <div class="col-6 d-flex d-lg-none">
            <div class="footer-link mt-5">
                Subscribe to our <a href="https://share-eu1.hsforms.com/1cg9VbQ-lSEu9h1dveuw1Ewf9dkj" target="_blank" style="text-decoration: underline;">newsletter</a>
            </div>
        </div>
    </div>
</footer>

</div>
</body>
<style scoped>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    #app {
        height: 100%;
    }
    .custom-menu {
        padding: 10px; /* Adjust menu padding */
        background-color: #F9B117; /* Menu background color */
    }

    .custom-menu-item {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 10px 0; /* Adjust menu item margin */
        border-radius: 8px; /* Adjust menu item border radius */
        background-color: white; /* Menu item background color */
    }

    /* Override Element UI styles */
    .custom-menu-item > .el-menu-item {
        width: 100%; /* Ensure menu items fill the parent container width */
        text-align: center; /* Center menu item content */
    }
    .underline-button {
        text-decoration: underline;
        color: #409EFF;
    }

    .logo-image {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }
    .login-container {
        margin-top: 20px;
        display: flex;
        align-items: center;
    }

    .user-avatar {
        margin-right: 10px; /* Adjust spacing between avatar and button */
    }

    /* Footer styles */
    footer.generic-padding {
        background-color: #333; /* Dark background */
        color: #fff; /* White text */
        padding: 40px 20px; /* Ample padding */
    }

    footer .row {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between; /* Evenly space out items */
    }

    footer .col-6, footer .col-3, footer .col-lg-4, footer .col-lg-2 {
        flex: 1;
        margin: 10px;
    }

    footer .footer-header {
        font-weight: bold;
        margin-bottom: 10px;
    }

    footer .footer-link a {
        color: #fff;
        text-decoration: none;
    }

    footer .footer-link a:hover {
        text-decoration: underline;
    }

    footer .footer-social-media-icon img {
        width: 32px; /* Icon size */
        height: 32px; /* Icon size */
    }
</style>
<script>
    new Vue({
        el:"#app",
        data:{
            currentPage:"dashboard.html",
            imageUrl:'',
            token: '',
            username: '',
        },
        mounted() {
            this.token = JSON.parse(window.localStorage.getItem('token'));
            if (!this.token) {
                return; // End method if no token
            } else {
                this.fetchAvatar();
                this.getUsername();
            }
        },
        methods: {
            change: function (uri) {
                this.currentPage = uri
            },
            fetchAvatar() {
                console.log("Method called successfully")
                axios.get('/user/findAvatar', {
                })
                    .then(response => {
                        console.log(response.data);
                        this.imageUrl = response.data.data; // Assuming the response contains avatarUrl
                    })
                    .catch(error => {
                        console.error('Failed to fetch avatar:', error);
                    });
            },
            getUsername: function () {
                axios.get('/user/getUsername').then(res =>{
                    this.username = res.data.data;
                    console.log(res.data.data);
                })
            },
            handleLogin() {
                window.location.href = 'login.html';
            },
            handleCommand(command) {
                if (command === 'logout') {
                    this.logout();
                }
            },
            viewEvent(eventId) {
                console.log(`Redirecting to event.html?id=${eventId}`);
                window.location.href = `/event.html?id=${eventId}`;
            },
            logout() {
                window.localStorage.removeItem('token');
                this.token = '';
                this.username = '';
                this.$message({
                    message: 'Logged out successfully',
                    type: 'success'
                });
            }
        }
    })
</script>
</html>
